<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <!--允许全部网络访问-->
    <uses-permission android:name="android.permission.INTERNET" />
    <!--允许读设备等信息-->
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <!--允许写入扩展存储-->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <!--允许写设备缓存，用于问题排查-->
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.READ_MEDIA_VIDEO" />
    <uses-permission android:name="android.permission.READ_MEDIA_AUDIO" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-permission android:name="android.permission.READ_MEDIA_IMAGES" />

    <!--获取网络信息状态-->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <!--获取当前WiFi接入的状态以及WLAN热点的信息-->
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

    <!--震动权限（使用通知功能必选）-->
    <uses-permission android:name="android.permission.VIBRATE"/>
    <!--目的是防止sdk被频繁唤醒（使用通知功能必选）-->
    <uses-permission android:name="android.permission.GET_TASKS"/>
    <!--内部广播通信及为了防止小部分手机服务没法正常工作（必选 -->
    <uses-permission android:name="getui.permission.GetuiService.${applicationId}"/>
    <permission
        android:name="getui.permission.GetuiService.${applicationId}"
        android:protectionLevel="signature"/>
    <!--兼容android12 alarm权限（必选 -->
    <uses-permission android:name="android.permission.SCHEDULE_EXACT_ALARM" />
    <!--vivo角标设置（必选 -->
    <uses-permission android:name="com.vivo.notification.permission.BADGE_ICON" />
    <!-- Android 12+ 需要精确的推送权限 -->
    <uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
    <!-- 个推所需权限 -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />

    <!-- OPPO推送所需权限 -->
    <uses-permission android:name="com.coloros.mcs.permission.RECIEVE_MCS_MESSAGE" />
    <uses-permission android:name="com.heytap.mcs.permission.RECIEVE_MCS_MESSAGE" />

    <!-- 华为 HMS SDK 所需（如果集成了华为通道） -->
    <uses-permission android:name="com.huawei.permission.external_app_settings.USE_COMPONENT" />

    <!-- 录音权限 -->
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.INTERNET" />

    <!-- 语音识别权限 -->
    <uses-permission android:name="android.permission.BIND_RECOGNITION_SERVICE" />
    
    <!-- 华为语音识别服务权限 -->
    <uses-permission android:name="com.huawei.vassistant.permission.BIND_RECOGNITION_SERVICE" />

    <!-- 可能会有蓝牙耳机 -->
    <uses-permission android:name="android.permission.BLUETOOTH"/>
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
    <uses-permission android:name="android.permission.BLUETOOTH_CONNECT"/>

    <application
        android:label="@string/appName"
        android:requestLegacyExternalStorage="true"
        android:usesCleartextTraffic="true"
        tools:replace="android:label"
        android:name="${applicationName}"
        android:icon="@mipmap/ic_launcher">
        
        <!-- FileProvider for native_file_preview -->
        <provider
            android:name="androidx.core.content.FileProvider"
            android:authorities="${applicationId}.fileprovider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/file_paths" />
        </provider>
        
        <activity
            android:name=".MainActivity"
            android:exported="true"
            android:launchMode="singleTop"
            android:taskAffinity=""
            android:theme="@style/LaunchTheme"
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode"
            android:hardwareAccelerated="true"
            android:windowSoftInputMode="adjustResize">
            <!-- Specifies an Android theme to apply to this Activity as soon as
                 the Android process has started. This theme is visible to the user
                 while the Flutter UI initializes. After that, this theme continues
                 to determine the Window background behind the Flutter UI. -->
            <meta-data
                android:name="io.flutter.embedding.android.NormalTheme"
                android:resource="@style/NormalTheme"
                />
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>

            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="ntwaistapp" android:host="health" />
                <!-- 替换为你应用的Scheme（个推/厂商通道使用） -->
                <data android:scheme="gtpushscheme" />
                <!-- 华为推送的Scheme格式为：hwpush://app/id?key=value -->
                <data android:scheme="hwpush" />
                <!-- 个推默认Scheme格式为：getui://?action=xxx&key=value -->
                <data
                    android:scheme="getui"
                    android:host="push"
                    android:pathPrefix="/" />
            </intent-filter>
        </activity>
        <!-- Don't delete the meta-data below.
             This is used by the Flutter tool to generate GeneratedPluginRegistrant.java -->
        <meta-data
            android:name="flutterEmbedding"
            android:value="2" />
        <meta-data
            android:name="PUSH_APPID"
            android:value="Omh21RFrHMAnXXOjPH7mY7" />
        <!-- 个推必要 meta -->
        <meta-data android:name="GETUI_APPID" android:value="${GETUI_APPID}" />
        <meta-data android:name="GETUI_APPSECRET" android:value="Pp0hnL7cvt9GVQ2nuhE7G9" />
        <meta-data android:name="GETUI_APPKEY" android:value="W1XAkXoLAp8OdSigQM8OI4" />

        <!-- 小米 -->
        <meta-data android:name="MI_APP_ID" android:value="${XIAOMI_APP_ID}" />
        <meta-data android:name="MI_APP_KEY" android:value="${XIAOMI_APP_KEY}" />

        <!-- OPPO -->
        <meta-data android:name="OPPO_APP_KEY" android:value="${OPPO_APP_KEY}" />
        <meta-data android:name="OPPO_APP_SECRET" android:value="${OPPO_APP_SECRET}" />

        <!-- 个推厂商插件版本声明（便于诊断与版本对齐） -->
        <meta-data android:name="GETUI_HONOR_PLUGIN_VERSION" android:value="3.6.0" />
        <meta-data android:name="GETUI_HUAWEI_PLUGIN_VERSION" android:value="3.1.2" />
        <meta-data android:name="GETUI_VIVO_PLUGIN_VERSION" android:value="3.2.0" />
        <meta-data android:name="GETUI_OPPO_PLUGIN_VERSION" android:value="3.5.0" />
        <meta-data android:name="GETUI_XIAOMI_PLUGIN_VERSION" android:value="3.3.3" />
        <meta-data android:name="GETUI_MEIZU_PLUGIN_VERSION" android:value="3.3.0" />

        <!-- 华为推送服务 -->
        <service
            android:name="com.huawei.hms.client.service.PushService"
            android:exported="true" />

        <!-- 华为推送接收消息的广播接收器 -->
        <receiver
            android:name="com.huawei.hms.client.push.PushReceiver"
            android:exported="true">
            <intent-filter>
                <action android:name="com.huawei.push.action.MESSAGING_EVENT" />
            </intent-filter>
        </receiver>

        <!-- 华为推送点击通知广播 -->
        <receiver
            android:name="com.huawei.hms.client.push.PushClickReceiver"
            android:exported="true">
            <intent-filter>
                <action android:name="com.huawei.push.action.NOTIFICATION_OPENED" />
            </intent-filter>
        </receiver>

        <!-- 华为推送注册状态广播 -->
        <receiver
            android:name="com.huawei.hms.client.push.PushTokenReceiver"
            android:exported="true">
            <intent-filter>
                <action android:name="com.huawei.push.action.REGISTRATION" />
            </intent-filter>
        </receiver>

        <!-- 小米推送服务组件 -->
        <service
            android:name="com.xiaomi.push.service.XMPushService"
            android:enabled="true"
            android:exported="true"
            android:process=":pushservice" />

        <service
            android:name="com.xiaomi.push.service.XMJobService"
            android:enabled="true"
            android:exported="false"
            android:permission="android.permission.BIND_JOB_SERVICE"
            android:process=":pushservice" />

        <receiver
            android:name="com.xiaomi.push.service.receivers.NetworkStatusReceiver"
            android:exported="true">
            <intent-filter>
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>
        </receiver>

        <!-- OPPO推送服务 -->
        <service
            android:name="com.heytap.msp.push.service.CompatibleDataMessageCallbackService"
            android:permission="com.coloros.mcs.permission.SEND_MCS_MESSAGE"
            android:exported="true">
            <intent-filter>
                <action android:name="com.coloros.mcs.action.RECEIVE_MCS_MESSAGE" />
            </intent-filter>
        </service>


        <!-- 前台服务声明 -->
        <service
            android:name="com.baseflow.geolocator.location.LocationForegroundService"
            android:foregroundServiceType="location" />

        <!--        &lt;!&ndash; 添加渠道元数据 &ndash;&gt;-->
        <meta-data
            android:name="CHANNEL"
            android:value="${CHANNEL}" />

        <!--适配华为（huawei）刘海屏-->
        <meta-data
            android:name="android.notch_support"
            android:value="true"/>
        <!--适配小米（xiaomi）刘海屏-->
        <meta-data
            android:name="notch.config"
            android:value="portrait|landscape" />

        <receiver
            android:name="com.igexin.sdk.PushReceiver"
            tools:replace="android:exported"
            android:exported="true">
            <intent-filter>
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
                <action android:name="android.intent.action.USER_PRESENT" />
                <action android:name="android.intent.action.MEDIA_MOUNTED" />
                <action android:name="android.intent.action.ACTION_POWER_CONNECTED" />
                <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED" />
            </intent-filter>
        </receiver>

    </application>
    <!-- Required to query activities that can process text, see:
         https://developer.android.com/training/package-visibility and
         https://developer.android.com/reference/android/content/Intent#ACTION_PROCESS_TEXT.

         In particular, this is used by the Flutter engine in io.flutter.plugin.text.ProcessTextPlugin. -->
    <queries>
        <intent>
            <action android:name="android.intent.action.PROCESS_TEXT"/>
            <data android:mimeType="text/plain"/>
        </intent>
        <intent>
            <action android:name="com.getui.sdk.action" />
        </intent>
        <intent>
            <action android:name="android.speech.RecognitionService" />
        </intent>
    </queries>
</manifest>

